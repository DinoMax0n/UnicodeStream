cmake_minimum_required(VERSION 3.10)
set(CMAKE_CXX_STANDARD 20)
set(CMAKE_CXX_STANDARD_REQUIRED ON)

project(UnicodeStream) 

if(CMAKE_INSTALL_PREFIX_INITIALIZED_TO_DEFAULT)
    set(CMAKE_INSTALL_PREFIX "${CMAKE_BINARY_DIR}/UnicodeStreamLib" CACHE PATH "Install path" FORCE)
endif()


add_library(UnicodeStream SHARED
    Source/UnicodeStream/dummy.cpp
)

set_target_properties(UnicodeStream PROPERTIES PREFIX " ")

target_include_directories(UnicodeStream PUBLIC
    ${CMAKE_CURRENT_SOURCE_DIR}/Source/UnicodeStream
    ${CMAKE_CURRENT_SOURCE_DIR}/Source/UnicodeStream/Lib/utf8cpp
)

install(TARGETS UnicodeStream
    EXPORT UnicodeStreamTargets
    LIBRARY DESTINATION lib
    ARCHIVE DESTINATION lib
    RUNTIME DESTINATION bin
    INCLUDES DESTINATION include
)

install(DIRECTORY Source/UnicodeStream/
    DESTINATION include
    FILES_MATCHING PATTERN "*.h"
)

install(EXPORT UnicodeStreamTargets
    FILE UnicodeStreamConfig.cmake
    NAMESPACE UnicodeStream::
    DESTINATION lib/cmake/UnicodeStream
)